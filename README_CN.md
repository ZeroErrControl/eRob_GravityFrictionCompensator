# 波纹管减速器旋转执行器的摩擦与重力补偿

中文版本 | [English Version](README.md)

这个项目展示了如何为工业级谐波减速器关节模组建立摩擦模型，并应用摩擦补偿和重力补偿技术，使系统表现得如同没有阻力和重力一样。

## 视频演示

<div align="center">
  <a href="https://www.douyin.com/root/search/%E7%BF%BC%E4%B9%8B%E9%81%93%E5%8D%97?aid=8cb9d95d-8616-40a8-8e3b-72b33bdcd262&type=general">
    <img src="https://img.youtube.com/vi/I29rnLXZR1I/0.jpg" alt="波纹管减速器旋转执行器演示">
  </a>
  <p>观看完整演示视频：<a href="https://www.douyin.com/root/search/%E7%BF%BC%E4%B9%8B%E9%81%93%E5%8D%97?aid=8cb9d95d-8616-40a8-8e3b-72b33bdcd262&type=general">抖音视频链接</a></p>
</div>

## 测试平台介绍

- **电源**: 48V DC 稳压电源
- **测试台**: 包含连杆、铁板、电机输出轴
- **控制硬件**:
  - 微控制器: STM32-C8T6
  - 通信模块: TAJ1050
  - USB转串口转换器
  - USB调试盒 

## 谐波减速器关节模组规格

- **型号**: eRob 70H100i
- **减速比**: 100:1
- **额定功率**: 100W
- **额定电压**: 48V
- **额定扭矩**: 10 Nm
- **峰值扭矩**: 70 Nm
- **最大转速**: 30 RPM

## 摩擦模型识别

在无负载条件下，我们进行了速度环测试，测量了不同电机速度下的平均电流，绘制了摩擦曲线。摩擦是电机实际速度的非线性函数：

- **X轴**: 电机速度 (RPM)
- **Y轴**: 摩擦 (以毫安表示)

### 特点:
- 当电机速度为零时，摩擦表现为静摩擦
- 当电机速度非零时，摩擦随电机速度非线性增加
- 顺时针/逆时针旋转的摩擦曲线关于原点对称

项目采用基于查找表的数学模型来精确描述这种摩擦。由于对称性，只存储正半轴数据。表格包含37个点，使用分段线性插值以满足实时计算需求。

## 重力补偿模型识别

抵消重力所需的电流取决于电机的转矩常数、连杆长度、铁板重量和电机角度。前三个参数可以合并为一个常数K。在位置模式下将电机保持在90°，我们测量电流以计算K值。

## 完整补偿模型

完整的摩擦和重力补偿模型如下:
1. 实时基于电机速度计算摩擦补偿电流
2. 基于电机角度计算重力补偿电流
3. 将两者相加作为转矩模式命令发送

## 效果演示

添加摩擦和重力补偿后，整个系统表现得如同没有阻力或重力。它可以自由旋转，轻轻一触就能使其旋转或停止。

- **仅启用摩擦补偿**：轻轻触摸可使电机自由旋转和停止
- **添加2kg铁板后**：轻推连杆使电机以恒定幅度摆动，如同没有摩擦
- **完整补偿**：系统表现得如同没有阻力或重力

## 项目结构


## 后续内容

在下一个项目中，我们将建立波纹管减速器旋转执行器的速度环模型。敬请期待。